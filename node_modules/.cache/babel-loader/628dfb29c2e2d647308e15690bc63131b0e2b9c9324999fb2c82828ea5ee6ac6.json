{"ast":null,"code":"import { mapState } from \"vuex\";\nimport GeneralButton from \"@/components/GeneralButton.vue\";\nexport default {\n  components: {\n    GeneralButton\n  },\n  computed: {\n    ...mapState([\"produits\", \"cartItems\", \"favorites\", \"categories\", \"actualProducts\"])\n  },\n  methods: {\n    isInCart(item) {\n      return this.cartItems.find(cartItem => cartItem.id === item.id) !== undefined;\n    },\n    addOrRemove(product) {\n      const isInCart = this.isInCart(product);\n      const mutationType = isInCart ? \"REMOVE_FROM_CART\" : \"ADD_TO_CART\";\n      product.quantity = product.moq;\n      this.$store.commit(mutationType, product);\n      this.saveCart();\n    },\n    loadCart() {\n      const storedCartItems = localStorage.getItem(\"cartItems\");\n      if (storedCartItems) {\n        this.$store.commit(\"SET_CART_ITEMS\", JSON.parse(storedCartItems));\n      }\n    },\n    saveCart() {\n      localStorage.setItem(\"cartItems\", JSON.stringify(this.cartItems));\n      console.log(\"Saved Cart:\", this.cartItems);\n    },\n    isFavorite(product) {\n      return this.favorites.some(fav => fav.id === product.id);\n    },\n    toggleFavorite(product) {\n      const index = this.favorites.findIndex(fav => fav.id === product.id);\n      if (index === -1) {\n        // Adds if not already in favs\n        this.$store.commit(\"ADD_TO_FAVORITES\", product);\n      } else {\n        // If in favs, removes after a conf message\n        if (confirm(\"Etes-vous certain de vouloir supprimer ce produit de vos favoris ?\")) this.$store.commit(\"REMOVE_FROM_FAVORITES\", product);\n      }\n      this.saveFavorites();\n    },\n    saveFavorites() {\n      localStorage.setItem(\"favorites\", JSON.stringify(this.favorites));\n      console.log(\"Saved Favorites:\", this.favorites);\n    },\n    loadFavorites() {\n      const storedFavorites = localStorage.getItem(\"favorites\");\n      if (storedFavorites) {\n        this.$store.commit(\"SET_FAVORITES\", JSON.parse(storedFavorites));\n      }\n    }\n  },\n  created() {\n    this.loadFavorites();\n    this.loadCart();\n  }\n};","map":{"version":3,"names":["mapState","GeneralButton","components","computed","methods","isInCart","item","cartItems","find","cartItem","id","undefined","addOrRemove","product","mutationType","quantity","moq","$store","commit","saveCart","loadCart","storedCartItems","localStorage","getItem","JSON","parse","setItem","stringify","console","log","isFavorite","favorites","some","fav","toggleFavorite","index","findIndex","confirm","saveFavorites","loadFavorites","storedFavorites","created"],"sources":["/workspaces/Projet-WebWares/src/views/MyFavorites.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"favorites-container\">\r\n      <br />\r\n      <h2>Favoris</h2>\r\n      <br />\r\n      <br />\r\n      <div class=\"favorites-grid\">\r\n        <div\r\n          v-for=\"(favorite, index) in favorites\"\r\n          :key=\"index\"\r\n          class=\"favorite\"\r\n        >\r\n          <svg\r\n            v-if=\"!isFavorite(favorite)\"\r\n            @click=\"toggleFavorite(favorite)\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            fill=\"currentColor\"\r\n            class=\"bi bi-heart\"\r\n            viewBox=\"0 0 16 16\"\r\n          >\r\n            <path\r\n              d=\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            v-else\r\n            @click=\"toggleFavorite(favorite)\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            fill=\"currentColor\"\r\n            class=\"bi bi-heart-fill\"\r\n            viewBox=\"0 0 16 16\"\r\n          >\r\n            <path\r\n              fill-rule=\"evenodd\"\r\n              d=\"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314\"\r\n            />\r\n          </svg>\r\n          <img :src=\"favorite.image\" :alt=\"favorite.titre\" />\r\n          <div class=\"product-info\">\r\n            <h4>{{ favorite.titre }}</h4>\r\n            <br />\r\n            <p>{{ favorite.prix }} â‚¬</p>\r\n            <p>Commande minimum : {{ favorite.moq }}</p>\r\n            <br />\r\n            <p class=\"description\">{{ favorite.description }}</p>\r\n            <br />\r\n          </div>\r\n          <div>\r\n            <GeneralButton\r\n              label=\"Ajouter au panier\"\r\n              @generalEvent=\"addOrRemove(favorite)\"\r\n              v-if=\"!isInCart(favorite)\"\r\n            />\r\n            <GeneralButton\r\n              label=\"Enlever du panier\"\r\n              @generalEvent=\"addOrRemove(favorite)\"\r\n              class=\"removeFromCartBtn\"\r\n              v-if=\"isInCart(favorite)\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport GeneralButton from \"@/components/GeneralButton.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    GeneralButton,\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      \"produits\",\r\n      \"cartItems\",\r\n      \"favorites\",\r\n      \"categories\",\r\n      \"actualProducts\",\r\n    ]),\r\n  },\r\n  methods: {\r\n    isInCart(item) {\r\n      return (\r\n        this.cartItems.find((cartItem) => cartItem.id === item.id) !== undefined\r\n      );\r\n    },\r\n\r\n    addOrRemove(product) {\r\n      const isInCart = this.isInCart(product);\r\n      const mutationType = isInCart ? \"REMOVE_FROM_CART\" : \"ADD_TO_CART\";\r\n      product.quantity = product.moq;\r\n      this.$store.commit(mutationType, product);\r\n      this.saveCart();\r\n    },\r\n\r\n    loadCart() {\r\n      const storedCartItems = localStorage.getItem(\"cartItems\");\r\n      if (storedCartItems) {\r\n        this.$store.commit(\"SET_CART_ITEMS\", JSON.parse(storedCartItems));\r\n      }\r\n    },\r\n\r\n    saveCart() {\r\n      localStorage.setItem(\"cartItems\", JSON.stringify(this.cartItems));\r\n      console.log(\"Saved Cart:\", this.cartItems);\r\n    },\r\n\r\n    isFavorite(product) {\r\n      return this.favorites.some((fav) => fav.id === product.id);\r\n    },\r\n\r\n    toggleFavorite(product) {\r\n      const index = this.favorites.findIndex((fav) => fav.id === product.id);\r\n      if (index === -1) {\r\n        // Adds if not already in favs\r\n        this.$store.commit(\"ADD_TO_FAVORITES\", product);\r\n      } else {\r\n        // If in favs, removes after a conf message\r\n        if (\r\n          confirm(\r\n            \"Etes-vous certain de vouloir supprimer ce produit de vos favoris ?\"\r\n          )\r\n        )\r\n          this.$store.commit(\"REMOVE_FROM_FAVORITES\", product);\r\n      }\r\n\r\n      this.saveFavorites();\r\n    },\r\n\r\n    saveFavorites() {\r\n      localStorage.setItem(\"favorites\", JSON.stringify(this.favorites));\r\n      console.log(\"Saved Favorites:\", this.favorites);\r\n    },\r\n\r\n    loadFavorites() {\r\n      const storedFavorites = localStorage.getItem(\"favorites\");\r\n      if (storedFavorites) {\r\n        this.$store.commit(\"SET_FAVORITES\", JSON.parse(storedFavorites));\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.loadFavorites();\r\n\r\n    this.loadCart();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.favorites-container h2 {\r\n  color: rgb(231, 67, 39);\r\n}\r\n\r\n.favorites-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin: 20px auto;\r\n  width: 80%;\r\n}\r\n\r\n.favorite {\r\n  width: calc(25% - 10px);\r\n  border: 1px solid #eee;\r\n  padding-bottom: 20px;\r\n  box-sizing: border-box;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.favorite img {\r\n  width: 100%;\r\n  height: 250px;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n\r\n.bi-heart,\r\n.bi-heart-fill {\r\n  color: rgb(231, 67, 39);\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n}\r\n\r\n.description {\r\n  font-style: italic;\r\n}\r\n\r\n.removeFromCartBtn {\r\n  background-color: rgb(94, 25, 111);\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}