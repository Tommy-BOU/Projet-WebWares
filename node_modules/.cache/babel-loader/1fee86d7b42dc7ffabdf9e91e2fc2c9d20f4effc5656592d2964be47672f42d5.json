{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7cea9537\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"product-details-container\"\n};\nconst _hoisted_2 = {\n  class: \"svg\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\"\n}, null, -1));\nconst _hoisted_4 = [_hoisted_3];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  \"fill-rule\": \"evenodd\",\n  d: \"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314\"\n}, null, -1));\nconst _hoisted_6 = [_hoisted_5];\nconst _hoisted_7 = [\"src\", \"alt\"];\nconst _hoisted_8 = {\n  class: \"prod-description-container\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  class: \"moq-text\"\n};\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"guestMessage\"\n};\nconst _hoisted_14 = {\n  key: 2\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_GeneralButton = _resolveComponent(\"GeneralButton\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [!$options.isFavorite($options.currentProduct) || $data.groupe != 'USER' ? (_openBlock(), _createElementBlock(\"svg\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $options.toggleFavorite($options.currentProduct)),\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"16\",\n    height: \"16\",\n    fill: \"currentColor\",\n    class: \"bi bi-heart\",\n    viewBox: \"0 0 16 16\"\n  }, _hoisted_4)) : (_openBlock(), _createElementBlock(\"svg\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = $event => $options.toggleFavorite($options.currentProduct)),\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"16\",\n    height: \"16\",\n    fill: \"currentColor\",\n    class: \"bi bi-heart-fill\",\n    viewBox: \"0 0 16 16\"\n  }, _hoisted_6)), _createElementVNode(\"img\", {\n    src: $options.currentProduct.image,\n    alt: $options.currentProduct.image\n  }, null, 8, _hoisted_7)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h2\", null, _toDisplayString($options.currentProduct.titre), 1), _createElementVNode(\"p\", null, _toDisplayString($options.currentProduct.description), 1), _hoisted_9, $data.groupe !== 'GUEST' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString($options.currentProduct.prix) + \" €\", 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"p\", _hoisted_11, \" Quantité minimum de commande : \" + _toDisplayString($options.currentProduct.moq), 1), $data.groupe !== 'USER' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_GeneralButton, {\n    label: \"Ajouter au panier\",\n    onGeneralEvent: _cache[2] || (_cache[2] = $event => $options.addOrRemove($options.currentProduct)),\n    disabled: $data.disableButton,\n    class: \"disabledButton\",\n    title: \"Cette fonctionnalité n'est disponible que pour nos membres.\"\n  }, null, 8, [\"disabled\"]), $data.identite === 'guest' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, \" Vous devez être membre pour pouvoir commander. \")) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [!$options.isInCart($options.currentProduct) ? (_openBlock(), _createBlock(_component_GeneralButton, {\n    key: 0,\n    label: \"Ajouter au panier\",\n    onGeneralEvent: _cache[3] || (_cache[3] = $event => $options.addOrRemove($options.currentProduct))\n  })) : (_openBlock(), _createBlock(_component_GeneralButton, {\n    key: 1,\n    label: \"Retirer du panier\",\n    onGeneralEvent: _cache[4] || (_cache[4] = $event => $options.addOrRemove($options.currentProduct)),\n    class: \"removeFromCartBtn\"\n  }))]))])]);\n}","map":{"version":3,"names":["class","_createElementVNode","d","_hoisted_3","_hoisted_5","key","_createElementBlock","_hoisted_1","_hoisted_2","$options","isFavorite","currentProduct","$data","groupe","onClick","_cache","$event","toggleFavorite","xmlns","width","height","fill","viewBox","_hoisted_4","_hoisted_6","src","image","alt","_hoisted_7","_hoisted_8","_toDisplayString","titre","description","_hoisted_9","_hoisted_10","prix","_createCommentVNode","_hoisted_11","moq","_hoisted_12","_createVNode","_component_GeneralButton","label","onGeneralEvent","addOrRemove","disabled","disableButton","title","identite","_hoisted_13","_hoisted_14","isInCart","_createBlock"],"sources":["/workspaces/Projet-WebWares/src/views/ProductDetails.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-details-container\">\r\n    <div class=\"svg\">\r\n      <svg\r\n        v-if=\"!isFavorite(currentProduct) || groupe != 'USER'\"\r\n        @click=\"toggleFavorite(currentProduct)\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"16\"\r\n        height=\"16\"\r\n        fill=\"currentColor\"\r\n        class=\"bi bi-heart\"\r\n        viewBox=\"0 0 16 16\"\r\n      >\r\n        <path\r\n          d=\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\"\r\n        />\r\n      </svg>\r\n      <svg\r\n        v-else\r\n        @click=\"toggleFavorite(currentProduct)\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"16\"\r\n        height=\"16\"\r\n        fill=\"currentColor\"\r\n        class=\"bi bi-heart-fill\"\r\n        viewBox=\"0 0 16 16\"\r\n      >\r\n        <path\r\n          fill-rule=\"evenodd\"\r\n          d=\"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314\"\r\n        />\r\n      </svg>\r\n      <img :src=\"currentProduct.image\" :alt=\"currentProduct.image\" />\r\n    </div>\r\n    <div class=\"prod-description-container\">\r\n      <h2>{{ currentProduct.titre }}</h2>\r\n      <p>{{ currentProduct.description }}</p>\r\n      <br />\r\n      <p v-if=\"groupe !== 'GUEST'\">{{ currentProduct.prix }} €</p>\r\n      <p class=\"moq-text\">\r\n        Quantité minimum de commande : {{ currentProduct.moq }}\r\n      </p>\r\n      <div v-if=\"groupe !== 'USER'\">\r\n        <GeneralButton\r\n          label=\"Ajouter au panier\"\r\n          @generalEvent=\"addOrRemove(currentProduct)\"\r\n          :disabled=\"disableButton\"\r\n          class=\"disabledButton\"\r\n          title=\"Cette fonctionnalité n'est disponible que pour nos membres.\"\r\n        />\r\n        <p v-if=\"identite === 'guest'\" class=\"guestMessage\">\r\n          Vous devez être membre pour pouvoir commander.\r\n        </p>\r\n      </div>\r\n      <div v-else>\r\n        <GeneralButton\r\n          v-if=\"!isInCart(currentProduct)\"\r\n          label=\"Ajouter au panier\"\r\n          @generalEvent=\"addOrRemove(currentProduct)\"\r\n        />\r\n\r\n        <GeneralButton\r\n          v-else\r\n          label=\"Retirer du panier\"\r\n          @generalEvent=\"addOrRemove(currentProduct)\"\r\n          class=\"removeFromCartBtn\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport GeneralButton from \"@/components/GeneralButton.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      identite: \"guest\",\r\n      groupe: \"GUEST\",\r\n      disableButton: true,\r\n    };\r\n  },\r\n\r\n  components: {\r\n    GeneralButton,\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"produits\", \"cartItems\", \"favorites\", \"actualProducts\"]),\r\n    currentProduct() {\r\n      const productId = this.$route.params.id;\r\n      return this.actualProducts[productId];\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    isInCart(item) {\r\n      return (\r\n        this.cartItems.find((cartItem) => cartItem.id === item.id) !== undefined\r\n      );\r\n    },\r\n\r\n    addOrRemove(product) {\r\n      const isInCart = this.isInCart(product);\r\n      const mutationType = isInCart ? \"REMOVE_FROM_CART\" : \"ADD_TO_CART\";\r\n      product.quantity = product.moq;\r\n      this.$store.commit(mutationType, product);\r\n    },\r\n\r\n    loadCart() {\r\n      const storedCartItems = localStorage.getItem(\"cartItems\");\r\n      if (storedCartItems) {\r\n        this.$store.commit(\"SET_CART_ITEMS\", JSON.parse(storedCartItems));\r\n      }\r\n    },\r\n\r\n    isFavorite(product) {\r\n      return this.favorites.some((fav) => fav.id === product.id);\r\n    },\r\n\r\n    toggleFavorite(product) {\r\n      if (this.groupe !== \"USER\") {\r\n        alert(\"Vous devez être membre pour pouvoir créer des favoris.\");\r\n      } else {\r\n        const index = this.favorites.findIndex((fav) => fav.id === product.id);\r\n\r\n        if (index === -1) {\r\n          // If the product is not in favorites, add it\r\n          this.$store.commit(\"ADD_TO_FAVORITES\", product);\r\n        } else {\r\n          // If the product is in favorites, remove it\r\n          this.$store.commit(\"REMOVE_FROM_FAVORITES\", product);\r\n        }\r\n\r\n        this.saveFavorites();\r\n      }\r\n    },\r\n\r\n    saveFavorites() {\r\n      localStorage.setItem(\"favorites\", JSON.stringify(this.favorites));\r\n      console.log(\"Saved Favorites:\", this.favorites);\r\n    },\r\n\r\n    loadFavorites() {\r\n      const storedFavorites = localStorage.getItem(\"favorites\");\r\n      if (storedFavorites) {\r\n        this.$store.commit(\"SET_FAVORITES\", JSON.parse(storedFavorites));\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    let identity = localStorage.getItem(\"myIdentity\");\r\n    if (identity) {\r\n      this.identite = JSON.parse(\r\n        localStorage.getItem(\"myIdentity\")\r\n      ).raisonSociale;\r\n\r\n      this.$store.commit(\"CHANGE_IDENTITY\", this.identite);\r\n\r\n      this.groupe = JSON.parse(localStorage.getItem(\"myIdentity\")).role;\r\n\r\n      this.loadFavorites();\r\n\r\n      this.loadCart();\r\n    }\r\n\r\n    const storedActualProducts = JSON.parse(\r\n      localStorage.getItem(\"actualProducts\")\r\n    );\r\n    if (storedActualProducts) {\r\n      this.$store.commit(\"SET_ACTUAL_PRODUCTS\", storedActualProducts);\r\n    } else {\r\n      this.$store.commit(\"SET_ACTUAL_PRODUCTS\", [\r\n        ...this.$store.state.produits,\r\n      ]);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.product-details-container {\r\n  display: flex;\r\n  margin: 50px auto;\r\n  align-items: center;\r\n  width: 700px;\r\n  position: relative;\r\n}\r\n\r\n.svg {\r\n  position: relative;\r\n}\r\n\r\n.bi-heart,\r\n.bi-heart-fill {\r\n  color: rgb(231, 67, 39);\r\n  position: absolute;\r\n  top: 35px;\r\n  right: 35px;\r\n  position: absolute;\r\n}\r\n\r\n.product-details-container img {\r\n  width: auto;\r\n  height: 300px;\r\n  margin: 20px;\r\n}\r\n\r\n.prod-description-container {\r\n  text-align: left;\r\n  margin: 20px;\r\n}\r\n\r\n.moq-text {\r\n  font-style: italic;\r\n}\r\n\r\n.removeFromCartBtn {\r\n  background-color: rgb(94, 25, 111);\r\n}\r\n\r\n.disabledButton {\r\n  background-color: #ccc;\r\n  color: #555;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n\r\n.guestMessage {\r\n  font-size: 0.8em;\r\n  font-style: italic;\r\n  color: rgb(231, 67, 39);\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}