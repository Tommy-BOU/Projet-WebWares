{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-c2a04dd6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"category\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Catégories\", -1));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Nom de la catégorie\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Actions\")])], -1));\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_9 = {\n  class: \"modal-content\"\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Ajouter nouvelle catégorie\", -1));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"name\"\n}, \"Name :\", -1));\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  value: \"Enregistrer\"\n}, null, -1));\nconst _hoisted_18 = {\n  key: 1\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"name\"\n}, \"Name :\", -1));\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  value: \"Enregistrer\"\n}, null, -1));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _hoisted_4, _createElementVNode(\"table\", null, [_hoisted_5, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.categoriesV, (categorie, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(categorie.id), 1), _createElementVNode(\"td\", null, _toDisplayString(categorie.name), 1), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"action-btns modify\",\n      type: \"button\",\n      onClick: $event => $options.openModal(index)\n    }, \" Modifier \", 8, _hoisted_6), _createElementVNode(\"button\", {\n      class: \"action-btns remove\",\n      type: \"button\",\n      onClick: $event => $options.remove(index)\n    }, \" Supprimer \", 8, _hoisted_7)])]);\n  }), 128))])]), _createElementVNode(\"button\", {\n    class: \"action-btns add-category\",\n    type: \"button\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.openModalAdd(_ctx.index = 'addCat'))\n  }, \" Ajouter nouvelle catégorie \")]), $data.openedModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", {\n    class: \"close\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.closeModal && $options.closeModal(...args))\n  }, \"×\"), _ctx.index === 'addCat' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_hoisted_11, _hoisted_12, _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.addCategory && $options.addCategory(...args), [\"prevent\"]))\n  }, [_hoisted_13, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.name = $event),\n    placeholder: \"2 caractères minimum\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.name]]), _hoisted_14, _hoisted_15, _hoisted_16, _hoisted_17], 32)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"h2\", null, \"Modifier catégorie : \" + _toDisplayString($data.name), 1), _hoisted_19, _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.update && $options.update(...args), [\"prevent\"]))\n  }, [_hoisted_20, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.name = $event),\n    placeholder: \"2 caractères minimum\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.name]]), _hoisted_21, _hoisted_22, _hoisted_23, _hoisted_24], 32)]))])])) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","for","type","value","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","$options","categoriesV","categorie","index","_toDisplayString","id","name","onClick","$event","openModal","_hoisted_6","remove","_hoisted_7","_cache","openModalAdd","_ctx","$data","openedModal","_hoisted_8","_hoisted_9","args","closeModal","_hoisted_10","_hoisted_11","_hoisted_12","onSubmit","_withModifiers","addCategory","_hoisted_13","placeholder","required","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","update","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_createCommentVNode"],"sources":["/workspaces/Projet-WebWares/src/views/ManageCategory.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"category\">\r\n      <h1>Catégories</h1>\r\n      <br /><br />\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Nom de la catégorie</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"(categorie, index) in categoriesV\" :key=\"index\">\r\n            <td>{{ categorie.id }}</td>\r\n            <td>{{ categorie.name }}</td>\r\n            <td>\r\n              <button\r\n                class=\"action-btns modify\"\r\n                type=\"button\"\r\n                @click=\"openModal(index)\"\r\n              >\r\n                Modifier\r\n              </button>\r\n              <button\r\n                class=\"action-btns remove\"\r\n                type=\"button\"\r\n                @click=\"remove(index)\"\r\n              >\r\n                Supprimer\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <button\r\n        class=\"action-btns add-category\"\r\n        type=\"button\"\r\n        @click=\"openModalAdd((index = 'addCat'))\"\r\n      >\r\n        Ajouter nouvelle catégorie\r\n      </button>\r\n    </div>\r\n    <!-- Modal -->\r\n    <div v-if=\"openedModal\" class=\"modal\" v-cloak>\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeModal\">&times;</span>\r\n        <div v-if=\"index === 'addCat'\">\r\n          <h2>Ajouter nouvelle catégorie</h2>\r\n          <br />\r\n          <form v-on:submit.prevent=\"addCategory\">\r\n            <label for=\"name\">Name :</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              v-model=\"name\"\r\n              placeholder=\"2 caractères minimum\"\r\n              required\r\n            />\r\n            <br /><br /><br />\r\n            <input type=\"submit\" value=\"Enregistrer\" />\r\n          </form>\r\n        </div>\r\n        <div v-else>\r\n          <h2>Modifier catégorie : {{ name }}</h2>\r\n          <br />\r\n          <form v-on:submit.prevent=\"update\">\r\n            <label for=\"name\">Name :</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              v-model=\"name\"\r\n              placeholder=\"2 caractères minimum\"\r\n              required\r\n            />\r\n            <br /><br /><br />\r\n            <input type=\"submit\" value=\"Enregistrer\" />\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      openedModal: false,\r\n      name: \"\",\r\n      // index: null,\r\n      newCategory: {\r\n        categorieId: \"\",\r\n      },\r\n      editingCategory: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    categoriesV() {\r\n      return this.$store.state.categoriesV;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    remove(index) {\r\n      if (confirm(\"Etes-vous certain de vouloir supprimer cette catégorie?\")) {\r\n        this.categoriesV.splice(index, 1);\r\n        this.saveToLocalStorage();\r\n      }\r\n    },\r\n\r\n    update() {\r\n      if (this.name !== \"\") {\r\n        this.categoriesV[this.index].name = this.name;\r\n        this.saveToLocalStorage();\r\n        this.closeModal();\r\n      }\r\n    },\r\n\r\n    addCategory() {\r\n      if (this.name.trim() !== \"\") {\r\n        let newId = this.categoriesV[this.categoriesV.length - 1].id + 1;\r\n        this.categoriesV.push({ id: newId, name: this.name });\r\n        this.saveToLocalStorage();\r\n        this.closeModal();\r\n      }\r\n    },\r\n\r\n    saveToLocalStorage() {\r\n      localStorage.setItem(\"categoriesV\", JSON.stringify(this.categoriesV));\r\n    },\r\n\r\n    openModal(index) {\r\n      this.openedModal = true;\r\n      this.index = index;\r\n      this.name = this.categoriesV[index].name;\r\n    },\r\n\r\n    openModalAdd() {\r\n      this.openedModal = true;\r\n      // this.index = -1;\r\n      this.name = \"\";\r\n    },\r\n\r\n    closeModal() {\r\n      this.openedModal = false;\r\n      this.name = \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    categoriesV: {\r\n      deep: true,\r\n      handler() {\r\n        this.saveToLocalStorage();\r\n      },\r\n    },\r\n  },\r\n\r\n  created() {\r\n    let storedCategoriesV = JSON.parse(localStorage.getItem(\"categoriesV\"));\r\n    if (storedCategoriesV) {\r\n      this.$store.commit(\"SET_CATEGORIESV\", storedCategoriesV);\r\n    } else {\r\n      // If categoriesV is not stored in localStorage, initialize it as a replica of categories\r\n      this.$store.commit(\"SET_CATEGORIESV\", [...this.$store.state.categories]);\r\n      // Save to localStorage for future use\r\n      this.saveToLocalStorage();\r\n    }\r\n\r\n    this.$store.dispatch(\"initializeCategories\");\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.category {\r\n  width: 600px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  border: 1px solid rgb(231, 67, 39);\r\n  padding: 10px 40px 30px 20px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  margin: 10px;\r\n  font-size: 14px;\r\n}\r\n\r\ntbody tr:nth-child(even) {\r\n  background-color: #f2f2f2;\r\n}\r\n\r\ntbody tr:nth-child(odd) {\r\n  background-color: #ffffff;\r\n}\r\n\r\ntd,\r\nth {\r\n  padding: 8px;\r\n  border-collapse: collapse;\r\n  border-bottom: 1px solid lightgrey;\r\n}\r\n\r\nlabel {\r\n  float: left;\r\n  font-weight: bold;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: none;\r\n  border-bottom: 1px solid rgb(231, 67, 39);\r\n}\r\n\r\nselect {\r\n  float: left;\r\n}\r\n\r\ninput[type=\"submit\"],\r\nbutton {\r\n  width: unset;\r\n  padding: 5px 15px;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  border: none;\r\n  border-radius: 5px;\r\n  border: 1px solid #4caf50;\r\n  color: #4caf50;\r\n}\r\n\r\n.modify {\r\n  border: 1px solid rgb(94, 25, 111);\r\n  color: rgb(94, 25, 111);\r\n}\r\n\r\n.remove {\r\n  border: 1px solid red;\r\n  color: red;\r\n}\r\n\r\n.add-category {\r\n  border: 1px solid #4caf50;\r\n  color: #4caf50;\r\n}\r\n\r\nbutton {\r\n  margin-left: 10px;\r\n}\r\n\r\n.modal {\r\n  display: flex;\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);\r\n  max-width: 600px;\r\n  max-height: 600px;\r\n  width: 100%;\r\n  overflow-y: scroll;\r\n  position: relative;\r\n}\r\n\r\n.close {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  cursor: pointer;\r\n  font-size: 18px;\r\n  color: #333;\r\n  z-index: 2;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}